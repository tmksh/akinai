<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API一覧 — akinai Docs</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="nav">
  <a href="index.html" class="nav-logo">akinai <span>Docs</span></a>
  <ul class="nav-links">
    <li><a href="index.html">はじめに</a></li>
    <li><a href="guide.html">連携ガイド</a></li>
    <li><a href="api.html" class="active">API一覧</a></li>
  </ul>
  <span class="nav-version">v1.0</span>
</nav>

<!-- Page Hero -->
<div class="page-hero">
  <div class="container">
    <span class="tag">API一覧</span>
    <h1>REST API 仕様</h1>
    <p>すべてのAPIのエンドポイントとパラメータの一覧です。</p>
  </div>
</div>

<!-- Auth Info Bar -->
<div class="auth-bar">
  <div class="container">
    <p>
      <strong>認証：</strong>
      すべてのAPIリクエストに
      <code>Authorization: Bearer &lt;APIキー&gt;</code>
      ヘッダを付けてください。APIキーの取得方法は
      <a href="guide.html#apikey" style="color:var(--orange-dark);font-weight:600;">連携ガイド</a>
      を参照してください。
    </p>
  </div>
</div>

<div class="doc-layout">

  <!-- Sidebar -->
  <aside class="sidebar">
    <p class="sidebar-group-title">商品</p>
    <a href="#products-list">商品一覧</a>
    <a href="#products-detail">商品詳細</a>
    <a href="#categories">カテゴリ</a>
    <p class="sidebar-group-title">コンテンツ</p>
    <a href="#contents-list">コンテンツ一覧</a>
    <a href="#contents-detail">コンテンツ詳細</a>
    <p class="sidebar-group-title">購入</p>
    <a href="#cart-validate">カート検証</a>
    <a href="#shipping">送料オプション</a>
    <a href="#checkout">チェックアウト</a>
    <a href="#orders">注文作成</a>
    <p class="sidebar-group-title">顧客</p>
    <a href="#customers">顧客一覧</a>
    <p class="sidebar-group-title">共通</p>
    <a href="#errors">エラー一覧</a>
  </aside>

  <!-- Content -->
  <main>

    <!-- ベースURL -->
    <div style="background:white;border:1px solid var(--border);border-radius:var(--radius);padding:1.25rem;margin-bottom:2rem;box-shadow:var(--shadow-sm);">
      <p style="font-size:.8rem;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.08em;margin-bottom:.5rem;">ベースURL</p>
      <p style="font-family:monospace;font-size:.95rem;color:var(--text);">https://yourshop.akinai.jp</p>
      <p style="font-size:.82rem;color:var(--text-sub);margin-top:.4rem;">すべてのAPIはこのURLから始まります。<code>yourshop</code> の部分はご自身のショップのサブドメインに置き換えてください。</p>
    </div>

    <!-- ══ 商品一覧 ══ -->
    <h2 id="products-list" style="font-size:1.2rem;font-weight:800;margin:0 0 1rem;padding-top:1.5rem;border-top:1px solid var(--border);scroll-margin-top:72px;">商品</h2>

    <div class="ep-block">
      <div class="ep-head">
        <span class="method method-get">GET</span>
        <span class="ep">/api/v1/products</span>
        <span class="ep-title">商品一覧の取得</span>
      </div>
      <div class="ep-body">
        <p>公開中の商品（status: published）の一覧を返します。</p>
        <p style="font-size:.8rem;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.07em;margin-bottom:.4rem;">クエリパラメータ</p>
        <div style="border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
          <table class="pt">
            <thead><tr><th>パラメータ</th><th>型</th><th>必須</th><th>説明</th></tr></thead>
            <tbody>
              <tr><td class="pname">page</td><td class="ptype">number</td><td><span class="opt">任意</span></td><td>ページ番号（デフォルト: 1）</td></tr>
              <tr><td class="pname">limit</td><td class="ptype">number</td><td><span class="opt">任意</span></td><td>1ページの件数（デフォルト: 20、最大: 100）</td></tr>
              <tr><td class="pname">search</td><td class="ptype">string</td><td><span class="opt">任意</span></td><td>商品名・説明のキーワード</td></tr>
              <tr><td class="pname">category_id</td><td class="ptype">string</td><td><span class="opt">任意</span></td><td>カテゴリIDで絞り込み</td></tr>
              <tr><td class="pname">sort</td><td class="ptype">string</td><td><span class="opt">任意</span></td><td><code>price_asc</code> / <code>price_desc</code> / <code>newest</code></td></tr>
            </tbody>
          </table>
        </div>
        <p style="font-size:.8rem;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.07em;margin:.85rem 0 .4rem;">返ってくるデータ（主要フィールド）</p>
        <div style="border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
          <table class="pt">
            <thead><tr><th>フィールド</th><th>型</th><th>内容</th></tr></thead>
            <tbody>
              <tr><td class="pname">products</td><td class="ptype">array</td><td>商品の配列</td></tr>
              <tr><td class="pname">total</td><td class="ptype">number</td><td>全件数</td></tr>
              <tr><td class="pname">page</td><td class="ptype">number</td><td>現在のページ番号</td></tr>
              <tr><td class="pname">per_page</td><td class="ptype">number</td><td>1ページの件数</td></tr>
              <tr><td class="pname">total_pages</td><td class="ptype">number</td><td>総ページ数</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- 商品詳細 -->
    <div class="ep-block" id="products-detail" style="scroll-margin-top:72px;">
      <div class="ep-head">
        <span class="method method-get">GET</span>
        <span class="ep">/api/v1/products/:id</span>
        <span class="ep-title">商品詳細の取得</span>
      </div>
      <div class="ep-body">
        <p><code>:id</code> には商品のIDまたはslug（URLに使える文字列）が指定できます。</p>
        <div style="border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
          <table class="pt">
            <thead><tr><th>返ってくるフィールド</th><th>型</th><th>内容</th></tr></thead>
            <tbody>
              <tr><td class="pname">id</td><td class="ptype">string</td><td>商品ID</td></tr>
              <tr><td class="pname">name</td><td class="ptype">string</td><td>商品名</td></tr>
              <tr><td class="pname">price</td><td class="ptype">number</td><td>価格（円）</td></tr>
              <tr><td class="pname">images</td><td class="ptype">array</td><td>画像URLの配列</td></tr>
              <tr><td class="pname">variants</td><td class="ptype">array</td><td>バリアント（サイズ・カラーなど）の配列</td></tr>
              <tr><td class="pname">category</td><td class="ptype">object</td><td>所属カテゴリの情報</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- カテゴリ -->
    <div class="ep-block" id="categories" style="scroll-margin-top:72px;">
      <div class="ep-head">
        <span class="method method-get">GET</span>
        <span class="ep">/api/v1/categories</span>
        <span class="ep-title">カテゴリ一覧の取得</span>
      </div>
      <div class="ep-body">
        <p>商品カテゴリの一覧を返します。</p>
        <div style="border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
          <table class="pt">
            <thead><tr><th>パラメータ</th><th>型</th><th>説明</th></tr></thead>
            <tbody>
              <tr><td class="pname">format</td><td class="ptype">string</td><td><code>tree</code>（階層ツリー）または <code>flat</code>（フラット配列）。デフォルトは <code>tree</code></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ══ コンテンツ ══ -->
    <h2 id="contents-list" style="font-size:1.2rem;font-weight:800;margin:2rem 0 1rem;padding-top:1.5rem;border-top:1px solid var(--border);scroll-margin-top:72px;">コンテンツ</h2>

    <div class="ep-block">
      <div class="ep-head">
        <span class="method method-get">GET</span>
        <span class="ep">/api/v1/contents</span>
        <span class="ep-title">コンテンツ一覧の取得</span>
      </div>
      <div class="ep-body">
        <p>ニュース・ブログ・ページなどのコンテンツ一覧を返します。</p>
        <div style="border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
          <table class="pt">
            <thead><tr><th>パラメータ</th><th>説明</th></tr></thead>
            <tbody>
              <tr><td class="pname">type</td><td>コンテンツの種類（例: <code>news</code>、<code>blog</code>、<code>page</code>）</td></tr>
              <tr><td class="pname">category</td><td>カテゴリのslugで絞り込み</td></tr>
              <tr><td class="pname">tag</td><td>タグで絞り込み</td></tr>
              <tr><td class="pname">page / limit</td><td>ページネーション</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="ep-block" id="contents-detail" style="scroll-margin-top:72px;">
      <div class="ep-head">
        <span class="method method-get">GET</span>
        <span class="ep">/api/v1/contents/:id</span>
        <span class="ep-title">コンテンツ詳細の取得</span>
      </div>
      <div class="ep-body">
        <p>コンテンツの全文（本文ブロック含む）を返します。<code>:id</code> にIDまたはslugが使えます。</p>
      </div>
    </div>

    <!-- ══ 購入 ══ -->
    <h2 id="cart-validate" style="font-size:1.2rem;font-weight:800;margin:2rem 0 1rem;padding-top:1.5rem;border-top:1px solid var(--border);scroll-margin-top:72px;">購入フロー</h2>

    <div class="ep-block">
      <div class="ep-head">
        <span class="method method-post">POST</span>
        <span class="ep">/api/v1/cart/validate</span>
        <span class="ep-title">カートの検証</span>
      </div>
      <div class="ep-body">
        <p>カートのアイテムを送ると、在庫確認・価格計算を行い結果を返します。決済の前に必ず呼び出してください。</p>
        <div style="border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
          <table class="pt">
            <thead><tr><th>送るデータ</th><th>型</th><th>必須</th><th>説明</th></tr></thead>
            <tbody>
              <tr><td class="pname">items</td><td class="ptype">array</td><td><span class="req">必須</span></td><td>カートのアイテム配列</td></tr>
              <tr><td class="pname">items[].product_id</td><td class="ptype">string</td><td><span class="req">必須</span></td><td>商品ID</td></tr>
              <tr><td class="pname">items[].variant_id</td><td class="ptype">string</td><td><span class="opt">任意</span></td><td>バリアントID（サイズなど）</td></tr>
              <tr><td class="pname">items[].quantity</td><td class="ptype">number</td><td><span class="req">必須</span></td><td>数量</td></tr>
            </tbody>
          </table>
        </div>
        <div class="callout callout-ok" style="margin-top:1rem;">
          <div>
            <strong>返ってくる主なデータ</strong>
            <p><code>valid</code>（全体のOK/NG）、<code>items</code>（各アイテムの在庫状況・金額）、<code>subtotal</code>（合計金額）、<code>messages</code>（警告メッセージ）</p>
          </div>
        </div>
      </div>
    </div>

    <div class="ep-block" id="shipping" style="scroll-margin-top:72px;">
      <div class="ep-head">
        <span class="method method-get">GET</span>
        <span class="ep">/api/v1/shipping-options</span>
        <span class="ep-title">送料オプションの取得</span>
      </div>
      <div class="ep-body">
        <p>購入金額と配送先都道府県に基づいた送料オプションの一覧を返します。</p>
        <div style="border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
          <table class="pt">
            <thead><tr><th>パラメータ</th><th>必須</th><th>説明</th></tr></thead>
            <tbody>
              <tr><td class="pname">subtotal</td><td><span class="req">必須</span></td><td>カートの合計金額（円）</td></tr>
              <tr><td class="pname">prefecture</td><td><span class="opt">任意</span></td><td>都道府県名（例: <code>東京都</code>）</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="ep-block" id="checkout" style="scroll-margin-top:72px;">
      <div class="ep-head">
        <span class="method method-post">POST</span>
        <span class="ep">/api/v1/checkout</span>
        <span class="ep-title">Stripe決済セッションの作成</span>
      </div>
      <div class="ep-body">
        <p>Stripe の決済ページへのURLを返します。返ってきた <code>url</code> にユーザーをリダイレクトしてください。</p>
        <div style="border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
          <table class="pt">
            <thead><tr><th>送るデータ</th><th>必須</th><th>説明</th></tr></thead>
            <tbody>
              <tr><td class="pname">items</td><td><span class="req">必須</span></td><td>カートのアイテム配列</td></tr>
              <tr><td class="pname">customer_email</td><td><span class="req">必須</span></td><td>購入者のメールアドレス</td></tr>
              <tr><td class="pname">shipping_address</td><td><span class="req">必須</span></td><td>配送先住所（name, postal_code, prefecture, city, line1）</td></tr>
              <tr><td class="pname">success_url</td><td><span class="req">必須</span></td><td>決済成功後のリダイレクト先URL</td></tr>
              <tr><td class="pname">cancel_url</td><td><span class="req">必須</span></td><td>キャンセル時のリダイレクト先URL</td></tr>
              <tr><td class="pname">shipping_option_id</td><td><span class="opt">任意</span></td><td>選択した送料オプションのID</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="ep-block" id="orders" style="scroll-margin-top:72px;">
      <div class="ep-head">
        <span class="method method-post">POST</span>
        <span class="ep">/api/v1/orders</span>
        <span class="ep-title">注文の作成</span>
      </div>
      <div class="ep-body">
        <p>Stripe決済が完了すると、Webhookが自動で注文を作成します。このAPIは代金引換など Stripe 以外の決済方法で使います。</p>
        <div class="callout callout-warn" style="margin-top:.75rem;">
          <div>
            <strong>Stripe決済の場合はこのAPIは不要です</strong>
            <p>Stripe のWebhookが自動で処理するため、通常はこのAPIを直接呼び出す必要はありません。</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ══ 顧客 ══ -->
    <h2 id="customers" style="font-size:1.2rem;font-weight:800;margin:2rem 0 1rem;padding-top:1.5rem;border-top:1px solid var(--border);scroll-margin-top:72px;">顧客</h2>

    <div class="ep-block">
      <div class="ep-head">
        <span class="method method-get">GET</span>
        <span class="ep">/api/v1/customers</span>
        <span class="ep-title">顧客一覧の取得</span>
      </div>
      <div class="ep-body">
        <p>登録済み顧客の一覧を返します。</p>
        <div style="border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;">
          <table class="pt">
            <thead><tr><th>パラメータ</th><th>説明</th></tr></thead>
            <tbody>
              <tr><td class="pname">email</td><td>メールアドレスで検索（完全一致）</td></tr>
              <tr><td class="pname">search</td><td>名前・メールのあいまい検索</td></tr>
              <tr><td class="pname">page / limit</td><td>ページネーション</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ══ エラー ══ -->
    <h2 id="errors" style="font-size:1.2rem;font-weight:800;margin:2rem 0 1rem;padding-top:1.5rem;border-top:1px solid var(--border);scroll-margin-top:72px;">エラー一覧</h2>
    <p style="font-size:.9rem;color:var(--text-sub);margin-bottom:1rem;">エラー時は以下のHTTPステータスコードと、<code>{ "error": "...", "code": "..." }</code> 形式のJSONが返ります。</p>

    <div class="tbl-wrap">
      <table class="tbl">
        <thead>
          <tr><th>ステータス</th><th>コード</th><th>意味と対処方法</th></tr>
        </thead>
        <tbody>
          <tr>
            <td><span class="badge badge-gray">400</span></td>
            <td class="ep">VALIDATION_ERROR</td>
            <td>送ったデータのフォーマットが不正。パラメータを確認してください</td>
          </tr>
          <tr>
            <td><span class="badge" style="background:#fee2e2;color:#dc2626;">401</span></td>
            <td class="ep">UNAUTHORIZED</td>
            <td>APIキーが無効または未指定。環境変数を確認してください</td>
          </tr>
          <tr>
            <td><span class="badge" style="background:#fee2e2;color:#dc2626;">403</span></td>
            <td class="ep">FORBIDDEN</td>
            <td>そのAPIキーではこの操作は許可されていません</td>
          </tr>
          <tr>
            <td><span class="badge badge-gray">404</span></td>
            <td class="ep">NOT_FOUND</td>
            <td>指定したIDのデータが存在しません</td>
          </tr>
          <tr>
            <td><span class="badge" style="background:#fef3c7;color:#92400e;">429</span></td>
            <td class="ep">RATE_LIMIT_EXCEEDED</td>
            <td>リクエストが多すぎます。少し待ってから再試行してください</td>
          </tr>
          <tr>
            <td><span class="badge" style="background:#fee2e2;color:#dc2626;">500</span></td>
            <td class="ep">INTERNAL_ERROR</td>
            <td>サーバー内部のエラー。しばらく待ってから再試行してください</td>
          </tr>
        </tbody>
      </table>
    </div>

  </main>
</div>

<footer class="footer">
  <p>akinai Docs &mdash; EC SaaS フロントエンド連携ガイド</p>
  <p style="margin-top:.4rem;">
    <a href="index.html">はじめに</a> &nbsp;&middot;&nbsp;
    <a href="guide.html">連携ガイド</a> &nbsp;&middot;&nbsp;
    <a href="api.html">API一覧</a>
  </p>
</footer>

</body>
</html>
